
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <title>Usage Â· HonKit</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="HonKit 4.0.8">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/@honkit/honkit-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    
    <link rel="prev" href="testing-heimdall.html" />
    

    </head>
    <body>
        
<div class="book honkit-cloak">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="architecture.html">
            
                <a href="architecture.html">
            
                    
                    Architecture
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="cmake_module.html">
            
                <a href="cmake_module.html">
            
                    
                    CMake Module
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="heimdall-sbom-manual.html">
            
                <a href="heimdall-sbom-manual.html">
            
                    
                    Heimdall SBOM Manual
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="heimdall-validate-manual.html">
            
                <a href="heimdall-validate-manual.html">
            
                    
                    Heimdall Validate Manual
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="ada_SBOM.html">
            
                <a href="ada_SBOM.html">
            
                    
                    Ada SBOM
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="ci-workflow.md">
            
                <span>
            
                    
                    CI Workflow
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="heimdall-developers-guide.md">
            
                <span>
            
                    
                    Heimdall Developers Guide
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="heimdall-users-guide.md">
            
                <span>
            
                    
                    Heimdall Users Guide
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="llvm-compatibility.html">
            
                <a href="llvm-compatibility.html">
            
                    
                    LLVM Compatibility
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="multi-standard-support.html">
            
                <a href="multi-standard-support.html">
            
                    
                    Multi-Standard Support
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="sbom_validation_guide.html">
            
                <a href="sbom_validation_guide.html">
            
                    
                    SBOM Validation Guide
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13" data-path="setup_usage.html">
            
                <a href="setup_usage.html">
            
                    
                    Setup Usage
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14" data-path="testing-heimdall.html">
            
                <a href="testing-heimdall.html">
            
                    
                    Testing Heimdall
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.15" data-path="usage.html">
            
                <a href="usage.html">
            
                    
                    Usage
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://github.com/honkit/honkit" target="blank" class="gitbook-link">
            Published with HonKit
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Usage</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="heimdall-usage-guide">Heimdall Usage Guide</h1>
<p>This guide explains how to use Heimdall to generate Software Bill of Materials (SBOMs) when compiling your C or C++ files.</p>
<h2 id="overview">Overview</h2>
<p>Heimdall is a Software Bill of Materials (SBOM) generation tool that works with both LLVM LLD and GNU Gold linkers. It automatically generates accurate SBOMs by analyzing your compiled binaries, capturing all components that actually make it into your final executables.</p>
<h2 id="prerequisites">Prerequisites</h2>
<ul>
<li>Heimdall built and installed (see <a href="../">README.md</a> for build instructions)</li>
<li>LLVM LLD linker (macOS/Linux) or GNU Gold linker (Linux only)</li>
<li>Your C++ source files ready to compile</li>
</ul>
<h2 id="method-1-using-lld-recommended---works-on-macos-and-linux">Method 1: Using LLD (Recommended - works on macOS and Linux)</h2>
<p>Heimdall uses a <strong>wrapper approach</strong> with LLD that works with all LLVM versions:</p>
<h3 id="step-1-compile-and-link-application">Step 1: Compile and link application</h3>
<pre><code class="lang-bash">g++ -c file.cpp -o file.o
g++ -fuse-ld=lld file.o -o file
</code></pre>
<h3 id="step-2-generate-sbom-using-heimdall-sbom-wrapper">Step 2: Generate SBOM using heimdall-sbom wrapper</h3>
<pre><code class="lang-bash">heimdall-sbom /usr/<span class="hljs-built_in">local</span>/lib/heimdall-lld.so file --format spdx --output file.spdx
</code></pre>
<p><strong>Or in one step:</strong></p>
<pre><code class="lang-bash">g++ -c file.cpp -o file.o &amp;&amp; \
g++ -fuse-ld=lld file.o -o file &amp;&amp; \
heimdall-sbom /usr/<span class="hljs-built_in">local</span>/lib/heimdall-lld.so file --format spdx --output file.spdx
</code></pre>
<h2 id="method-2-using-gold-linux-only">Method 2: Using Gold (Linux only)</h2>
<p>Gold supports both plugin interface and wrapper approach:</p>
<h3 id="plugin-interface-requires-dependencies">Plugin Interface (requires dependencies)</h3>
<pre><code class="lang-bash"><span class="hljs-comment"># Compile to object file</span>
g++ -c file.cpp -o file.o

<span class="hljs-comment"># Link with Gold plugin</span>
g++ -fuse-ld=gold -Wl,--plugin=/usr/<span class="hljs-built_in">local</span>/lib/heimdall-gold.so \
    -Wl,--plugin-opt=sbom-output=file.spdx \
    file.o -o file
</code></pre>
<h3 id="heimdall-sbom-wrapper-approach">Heimdall-SBOM Wrapper Approach</h3>
<pre><code class="lang-bash"><span class="hljs-comment"># Compile to object file</span>
g++ -c file.cpp -o file.o

<span class="hljs-comment"># Link normally with Gold</span>
g++ -fuse-ld=gold file.o -o file

<span class="hljs-comment"># Generate SBOM using wrapper</span>
heimdall-sbom /usr/<span class="hljs-built_in">local</span>/lib/heimdall-gold.so file --format spdx --output file.spdx
</code></pre>
<h2 id="method-3-direct-compilation-with-lld-macoslinux">Method 3: Direct compilation with LLD (macOS/Linux)</h2>
<p>You can also compile and link in one step using LLD directly:</p>
<pre><code class="lang-bash"><span class="hljs-comment"># Compile and link with LLD</span>
g++ -fuse-ld=lld file.cpp -o file

<span class="hljs-comment"># Generate SBOM using wrapper</span>
heimdall-sbom ../../build-cpp23/lib/heimdall-lld.so file --format spdx --output file.spdx
</code></pre>
<h2 id="method-4-using-cmake">Method 4: Using CMake</h2>
<p>Heimdall provides a powerful CMake module for seamless SBOM generation. This module supports:</p>
<ul>
<li>Executables and libraries (static/shared/interface)</li>
<li>Multi-target projects</li>
<li>Installable projects</li>
<li>Automatic linker detection (LLD/Gold)</li>
</ul>
<h3 id="quick-integration">Quick Integration</h3>
<ol>
<li>Add the <code>cmake/</code> directory to your <code>CMAKE_MODULE_PATH</code>:<pre><code class="lang-cmake"><span class="hljs-keyword">list</span>(APPEND CMAKE_MODULE_PATH <span class="hljs-string">"${CMAKE_SOURCE_DIR}/cmake"</span>)
</code></pre>
</li>
<li>Include the Heimdall modules:<pre><code class="lang-cmake"><span class="hljs-keyword">include</span>(HeimdallConfig)
<span class="hljs-keyword">include</span>(HeimdallSBOM)
</code></pre>
</li>
<li>Add your targets and enable SBOM generation:<pre><code class="lang-cmake"><span class="hljs-keyword">add_executable</span>(myapp main.cpp)
heimdall_enable_sbom(myapp FORMAT spdx-<span class="hljs-number">2.3</span> VERBOSE <span class="hljs-keyword">ON</span>)
</code></pre>
<h2 id="method-5-using-make">Method 5: Using make</h2>
</li>
</ol>
<pre><code class="lang-makefile">CXX = g++
LDFLAGS += -fuse-ld=lld

<span class="hljs-variable">$(TARGET)</span>: <span class="hljs-variable">$(OBJECTS)</span>
    <span class="hljs-variable">$(CXX)</span> <span class="hljs-variable">$(OBJECTS)</span> <span class="hljs-variable">$(LDFLAGS)</span> -o <span class="hljs-variable">$@</span>
    heimdall-sbom /usr/local/lib/heimdall-lld.so <span class="hljs-variable">$@</span> --format spdx --output <span class="hljs-variable">$@</span>.spdx
</code></pre>
<p>See <a href="../cmake/templates/cmake-sbom-template.cmake"><code>cmake/templates/cmake-sbom-template.cmake</code></a> for a ready-to-use template.</p>
<h3 id="advanced-cmake-examples">Advanced CMake Examples</h3>
<p>Heimdall includes advanced CMake module examples:</p>
<table>
<thead>
<tr>
<th>Example Directory</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>heimdall-cmake-module-example</code></td>
<td>Multi-target (executable + static lib)</td>
</tr>
<tr>
<td><code>heimdall-cmake-sharedlib-example</code></td>
<td>Shared library + executable</td>
</tr>
<tr>
<td><code>heimdall-cmake-interface-example</code></td>
<td>Interface (header-only) + implementation + executable</td>
</tr>
<tr>
<td><code>heimdall-cmake-install-example</code></td>
<td>Installable static lib + executable + headers</td>
</tr>
</tbody>
</table>
<h2 id="complete-example">Complete Example</h2>
<p>Here's a complete example with a simple C++ file:</p>
<pre><code class="lang-bash"><span class="hljs-comment"># Create a simple test file</span>
cat &gt; test.cpp &lt;&lt; <span class="hljs-string">'EOF'</span>
<span class="hljs-comment">#include &lt;iostream&gt;</span>
<span class="hljs-comment">#include &lt;string&gt;</span>

int <span class="hljs-function"><span class="hljs-title">main</span></span>() {
    std::string message = <span class="hljs-string">"Hello, Heimdall!"</span>;
    std::cout &lt;&lt; <span class="hljs-string">message &lt;&lt; std::endl;
    return 0;
}
EOF

# Compile to object file
g++ -c test.cpp -o test.o

# Link with LLD
g++ -fuse-ld=lld test.o -o test

# Generate SBOM using wrapper
heimdall-sbom /usr/local/lib/heimdall-lld.so test --format spdx --output test.spdx

# Run the program
./test

# View the generated SBOM
cat test.spdx
</span></code></pre>
<h2 id="advanced-examples">Advanced Examples</h2>
<h3 id="multiple-source-files">Multiple Source Files</h3>
<pre><code class="lang-bash"><span class="hljs-comment"># Compile multiple source files</span>
g++ -c main.cpp -o main.o
g++ -c utils.cpp -o utils.o
g++ -c math.cpp -o math.o

<span class="hljs-comment"># Link with LLD</span>
g++ -fuse-ld=lld main.o utils.o math.o -o app

<span class="hljs-comment"># Generate SBOM</span>
heimdall-sbom /usr/<span class="hljs-built_in">local</span>/lib/heimdall-lld.so app --format spdx --output app.spdx
</code></pre>
<h3 id="with-external-libraries">With External Libraries</h3>
<pre><code class="lang-bash"><span class="hljs-comment"># Compile with external library</span>
g++ -c main.cpp -o main.o

<span class="hljs-comment"># Link with library and LLD</span>
g++ -fuse-ld=lld main.o -L/usr/<span class="hljs-built_in">local</span>/lib -lmylib -o app

<span class="hljs-comment"># Generate SBOM</span>
heimdall-sbom /usr/<span class="hljs-built_in">local</span>/lib/heimdall-lld.so app --format spdx --output app.spdx
</code></pre>
<h3 id="using-gold-with-multiple-files">Using Gold with Multiple Files</h3>
<pre><code class="lang-bash"><span class="hljs-comment"># Compile files</span>
g++ -c file1.cpp -o file1.o
g++ -c file2.cpp -o file2.o

<span class="hljs-comment"># Link with Gold (plugin interface)</span>
g++ -fuse-ld=gold -Wl,--plugin=./usr/<span class="hljs-built_in">local</span>/lib/heimdall-gold.so \
    -Wl,--plugin-opt=sbom-output=app.spdx \
    file1.o file2.o -o app

<span class="hljs-comment"># Or use wrapper approach if plugin fails</span>
g++ -fuse-ld=gold file1.o file2.o -o app
heimdall-sbom /usr/<span class="hljs-built_in">local</span>/lib//heimdall-gold.so app --format spdx --output app.spdx
</code></pre>
<h2 id="platform-specific-notes">Platform-Specific Notes</h2>
<h3 id="macos">macOS</h3>
<ul>
<li>Use LLD linker (Gold is not available on macOS)</li>
<li>Plugin file extension is <code>.dylib</code></li>
<li>Example: <code>/usr/local/lib/heimdall-lld.dylib</code></li>
<li><strong>Wrapper approach only</strong> - no plugin interface available</li>
</ul>
<h3 id="linux">Linux</h3>
<ul>
<li>Can use either LLD or Gold linker</li>
<li>Plugin file extension is <code>.so</code></li>
<li>Example: <code>/usr/local/lib/heimdall-lld.so</code> or <code>/usr/local/lib/heimdall-gold.so</code></li>
<li><strong>Gold plugin interface</strong> available with dependencies, <strong>wrapper approach</strong> as fallback</li>
</ul>
<h2 id="quick-reference">Quick Reference</h2>
<table>
<thead>
<tr>
<th>Platform</th>
<th>Linker</th>
<th>Approach</th>
<th>Command</th>
</tr>
</thead>
<tbody>
<tr>
<td>macOS</td>
<td>LLD</td>
<td>Wrapper</td>
<td><code>heimdall-sbom /usr/local/lib/heimdall-lld.dylib file --format spdx --output file.spdx</code></td>
</tr>
<tr>
<td>Linux</td>
<td>LLD</td>
<td>Wrapper</td>
<td><code>heimdall-sbom /usr/local/lib/heimdall-lld.so file --format spdx --output file.spdx</code></td>
</tr>
<tr>
<td>Linux</td>
<td>Gold</td>
<td>Plugin</td>
<td><code>g++ -fuse-ld=gold -Wl,--plugin=/usr/local/lib/heimdall-gold.so -Wl,--plugin-opt=sbom-output=file.spdx file.o -o file</code></td>
</tr>
<tr>
<td>Linux</td>
<td>Gold</td>
<td>Wrapper</td>
<td><code>heimdall-sbom ./usr/local/lib/heimdall-gold.so file --format spdx --output file.spdx</code></td>
</tr>
</tbody>
</table>
<h2 id="integration-with-build-systems">Integration with Build Systems</h2>
<h3 id="makefile-example">Makefile Example</h3>
<pre><code class="lang-makefile">CXX = g++
LDFLAGS += -fuse-ld=lld

<span class="hljs-variable">$(TARGET)</span>: <span class="hljs-variable">$(OBJECTS)</span>
    <span class="hljs-variable">$(CXX)</span> <span class="hljs-variable">$(OBJECTS)</span> <span class="hljs-variable">$(LDFLAGS)</span> -o <span class="hljs-variable">$@</span>
    heimdall-sbom /usr/local/lib/heimdall-lld.so <span class="hljs-variable">$@</span> --format spdx --output <span class="hljs-variable">$@</span>.spdx
</code></pre>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="testing-heimdall.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page: Testing Heimdall">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Usage","level":"1.15","depth":1,"previous":{"title":"Testing Heimdall","level":"1.14","depth":1,"path":"docs/testing-heimdall.md","ref":"docs/testing-heimdall.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":[],"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56},"embedFonts":false},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"docs/usage.md","mtime":"2025-07-27T21:36:11.278Z","type":"markdown"},"gitbook":{"version":"4.0.8","time":"2025-07-27T21:36:16.340Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <noscript>
        <style>
            .honkit-cloak {
                display: block !important;
            }
        </style>
    </noscript>
    <script>
        // Restore sidebar state as critical path for prevent layout shift
        function __init__getSidebarState(defaultValue){
            var baseKey = "";
            var key = baseKey + ":sidebar";
            try {
                var value = localStorage[key];
                if (value === undefined) {
                    return defaultValue;
                }
                var parsed = JSON.parse(value);
                return parsed == null ? defaultValue : parsed;
            } catch (e) {
                return defaultValue;
            }
        }
        function __init__restoreLastSidebarState() {
            var isMobile = window.matchMedia("(max-width: 600px)").matches;
            if (isMobile) {
                // Init last state if not mobile
                return;
            }
            var sidebarState = __init__getSidebarState(true);
            var book = document.querySelector(".book");
            // Show sidebar if it enabled
            if (sidebarState && book) {
                book.classList.add("without-animation", "with-summary");
            }
        }

        try {
            __init__restoreLastSidebarState();
        } finally {
            var book = document.querySelector(".book");
            book.classList.remove("honkit-cloak");
        }
    </script>
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

